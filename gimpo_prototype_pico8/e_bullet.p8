pico-8 cartridge // http://www.pico-8.com
version 41
__lua__
e_bullet = {}

function e_bullet.new(sx,sy,st)
 local self=
 {
  x=sx,
  y=sy,
  z=-1,
  w=8,
  h=8,
  istop=st,
  is_del=false
 }
 
 self.start=function()
 
 end
 
 self.update=function()
  if self.istop then
   self.y-=5
   
   if self.y<=0 then
    del(all_objects,self)
   end
  else
   self.y+=1
   
   if self.y>=127 then
    del(all_objects,self)
   end
  end
  
  for p in all(all_objects) do
   if p.tag=="player" then
    if self.coll(p) then
     p.hp-=20
     del(all_objects,self)
    end
   end
  end
 end
 
 self.draw=function()
  spr(5,self.x,self.y,1,1)
 end
 
 self.coll=function(t)
  return self.x < t.x+t.w and
         t.x<self.x+self.w and
         self.y<t.y+t.h and
         t.y<self.y+self.h
 end
 
 return self
end
__gfx__
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
